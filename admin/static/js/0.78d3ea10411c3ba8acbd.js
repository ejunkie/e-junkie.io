webpackJsonp([0],{VH08:function(t,e){},ejEj:function(t,e){},rZfT:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"Pages",data:()=>({Pages:null,totalPages:0,loader:null,searchText:null}),mounted:function(){var t=this;this.loader=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),this.axios.post(window.Config.API.endpoint+"pages",{}).then(e=>{setTimeout(()=>{t.loader&&t.loader.close()},500),t.Pages=e.data.Pages,t.renderPages()}).catch(t=>{console.log(t)})},methods:{renderPages:function(){for(var t in this.totalPages=0,this.Pages)this.Pages.hasOwnProperty(t)&&(this.totalPages++,this.Pages[t].show=!0)},togglePageVisibility:function(t,e){var s=this.$loading({lock:!0,text:"Updating",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=this;this.axios.post(window.Config.API.endpoint+"page/visibility",{key:t,page:e}).then(t=>{a.Pages=t.data.Pages,a.renderPages(),setTimeout(()=>{s.close()},500)}).catch(t=>{setTimeout(()=>{s.close()},500)})},deletePage:function(t){var e=this.$loading({lock:!0,text:"Updating",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),s=this;this.axios.post(window.Config.API.endpoint+"page/delete",{key:t}).then(t=>{s.Pages=t.data.Pages,s.renderPages(),s.$message({showClose:!0,message:"Page deleted !",type:"danger"}),setTimeout(()=>{e.close()},500)}).catch(t=>{setTimeout(()=>{e.close()},500)})},filterPages:function(){if(this.searchText)for(var t in this.Pages)-1!=this.Pages[t].title.toLowerCase().indexOf(this.searchText.toLowerCase())||-1!=t.toLowerCase().indexOf(this.searchText.toLowerCase())?this.Pages[t].show=!0:this.Pages[t].show=!1;else for(var t in this.Pages)this.Pages[t].show=!0}},watch:{searchText:function(t){""==t&&(this.searchText=null),this.filterPages()}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"pages"}},[s("div",{staticClass:"columns is-multiline"},[s("div",{staticClass:"column is-12"},[s("div",{staticClass:"box details"},[s("div",{staticClass:"box-title"},[s("i",{staticClass:"icon ion-md-document"}),t._v("\n\t\t  \t\t\tPages\n\t\t  \t\t\t"),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"Search Pages",id:"searchTextInput",clearable:""},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),t._v(" "),s("el-tag",{attrs:{type:"danger"}},[t._v(t._s(t.totalPages))]),t._v(" "),s("el-button",{attrs:{size:"small",icon:"el-icon-circle-plus",type:"success",plain:""},on:{click:function(e){return t.$router.push({path:"/page/new"})}}},[t._v("Add New Page")])],1),t._v(" "),t.Pages?s("div",{staticClass:"box-content"},[t._m(0),t._v(" "),t._l(t.Pages,function(e,a){return e.show?s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-1"},[s("a",{attrs:{target:"_preview",href:"/"+a.replace(".md","")}},[s("i",{staticClass:"icon ion-md-open"})])]),t._v(" "),s("div",{staticClass:"column is-5"},[s("router-link",{attrs:{to:"/page/"+a}},[t._v("\n\t\t  \t\t\t\t\t\t"+t._s(e.title)+"\n\t  \t\t\t\t\t\t")])],1),t._v(" "),s("div",{staticClass:"column is-2"},[s("span",[t._v(t._s(e.created_at))])]),t._v(" "),s("div",{staticClass:"column is-2"},[s("span",[t._v(t._s(e.updated_at))])]),t._v(" "),s("div",{staticClass:"column is-1"},[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"","inactive-text":""},on:{change:function(s){return t.togglePageVisibility(a,e)}},model:{value:e.visible,callback:function(s){t.$set(e,"visible",s)},expression:"Page.visible"}})],1),t._v(" "),s("div",{staticClass:"column is-1"},[s("i",{staticClass:"icon ion-md-trash deleteBtn",on:{click:function(e){return t.deletePage(a)}}})])]):t._e()})],2):t._e()])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-1"},[s("p",[t._v("Open")])]),t._v(" "),s("div",{staticClass:"column is-5"},[s("p",[t._v("Title")])]),t._v(" "),s("div",{staticClass:"column is-2"},[s("p",[t._v("Created At")])]),t._v(" "),s("div",{staticClass:"column is-2"},[s("p",[t._v("Updated At")])]),t._v(" "),s("div",{staticClass:"column is-1"},[s("p",[t._v("Visible")])]),t._v(" "),s("div",{staticClass:"column is-1"},[s("p",[t._v("Delete")])])])}]};var n=s("VU/8")(a,i,!1,function(t){s("VH08"),s("ejEj")},"data-v-78d20997",null);e.default=n.exports}});
//# sourceMappingURL=0.78d3ea10411c3ba8acbd.js.map